{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nconst PRIVATE_ROUTES = [\"/\", \"/home\"];\n\nexport default async function middleware(req: NextRequest) {\n  const token = req.cookies.get(\"chatapp-session\")?.value;\n  const url = req.nextUrl.clone();\n  const pathname = url.pathname;\n\n  if (!PRIVATE_ROUTES.includes(pathname)) {\n    return NextResponse.next();\n  }\n\n  if (!token) {\n    url.pathname = \"/login\";\n    return NextResponse.redirect(url);\n  }\n\n  const response = await fetch(\"http://localhost:1323/v1/auth/verify\", {\n    method: \"POST\",\n    headers: req.headers,\n  });\n\n  if (response.status != 200) {\n    url.pathname = \"/login\";\n    return NextResponse.redirect(url);\n  }\n\n  const res = NextResponse.next();\n\n  const json = await response.json()\n  res.headers.set(\"x-user-id\", json.userId);\n\n  return res;\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AACA,MAAM,iBAAiB;IAAC;IAAK;CAAQ;AAEtB,eAAe,WAAW,GAAgB;IACvD,MAAM,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB;IAClD,MAAM,MAAM,IAAI,OAAO,CAAC,KAAK;IAC7B,MAAM,WAAW,IAAI,QAAQ;IAE7B,IAAI,CAAC,eAAe,QAAQ,CAAC,WAAW;QACtC,OAAO,qZAAY,CAAC,IAAI;IAC1B;IAEA,IAAI,CAAC,OAAO;QACV,IAAI,QAAQ,GAAG;QACf,OAAO,qZAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,MAAM,WAAW,MAAM,MAAM,wCAAwC;QACnE,QAAQ;QACR,SAAS,IAAI,OAAO;IACtB;IAEA,IAAI,SAAS,MAAM,IAAI,KAAK;QAC1B,IAAI,QAAQ,GAAG;QACf,OAAO,qZAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,MAAM,MAAM,qZAAY,CAAC,IAAI;IAE7B,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa,KAAK,MAAM;IAExC,OAAO;AACT"}}]
}